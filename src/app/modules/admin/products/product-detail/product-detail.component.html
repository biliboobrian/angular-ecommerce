<form [formGroup]="productForm" autocomplete="off" (submit)="saveProduct()">
    <div class="form-group">
        <label for="name">Nom</label>
        <input type="text" formControlName="name" class="form-control" id="name" aria-describedby="nameHelp"
            placeholder="Nom .." [class.is-invalid]="submitted && !productForm.get('name').valid">
        <div *ngIf="submitted && productForm.get('name').errors" class="invalid-feedback">
            <div *ngIf="productForm.get('name').errors.required">Le nom du produit doit être renseigné</div>
        </div>
        <small id="nameHelp" class="form-text text-muted">Le nom de votre produit ex: "Boissons", "Nos spécialités"
            etc..</small>
    </div>
    <div class="form-group">
        <label for="description">Description</label>
        <textarea type="text" formControlName="description" class="form-control" id="description"
            aria-describedby="descriptionHelp" placeholder="Description .."></textarea>
        <small id="descriptionHelp" class="form-text text-muted">Une petite description de votre produit comme sa composition, les allérgènes etc.. , elle figurera
            en dessous du produit dans le menu et sur les commandes.</small>
    </div>
    <div class="form-group">
        <label for="img">Image</label>
        <input type="text" formControlName="img" class="form-control" id="img" aria-describedby="imgHelp"
            placeholder="Image .." [class.is-invalid]="submitted && !productForm.get('img').valid">
        <div *ngIf="submitted && productForm.get('img').errors" class="invalid-feedback">
            <div *ngIf="productForm.get('img').errors.required">Le nom du produit doit être renseigné</div>
        </div>
        <small id="imgHelp" class="form-text text-muted">Si vous voulez ajouter une image a votre produit, l'image doit se situer dans ./assets/products/, elle ne doit pas contenir d'espace ex: mon-produit.jpg</small>
    </div>
    <div class="form-group">
        <label for="group">Groupe de produits</label>
        <select class="form-control" formControlName="groupId" id="group">
            <option value="">Sélection du groupe ..</option>
          <option *ngFor="let group of groups" [value]="group.id">{{ group.name }}</option>
        </select>
        <div *ngIf="submitted && productForm.get('groupId').errors" class="invalid-feedback">
            <div *ngIf="productForm.get('groupId').errors.required">Le groupe doit être renseigné.</div>
        </div>
        <small id="groupIdHelp" class="form-text text-muted">Le prix unitaire de votre produit.</small>
      </div>

      <div class="form-group">
        <label for="price">Prix unitaire</label>
        <input type="number" formControlName="price" step="0.05" class="form-control" id="price" aria-describedby="priceHelp"
            placeholder="Prix unitaire .." [class.is-invalid]="submitted && !productForm.get('price').valid" pattern="[0-9.,]*">
        <div *ngIf="submitted && productForm.get('price').errors" class="invalid-feedback">
            <div *ngIf="productForm.get('price').errors.min">Le prix du produit doit être positif</div>
            <div *ngIf="productForm.get('price').errors.required">Le prix du produit doit être renseigné</div>
        </div>
        <small id="priceHelp" class="form-text text-muted">Le prix unitaire de votre produit.</small>
    </div>
    <div class="form-group">
        <input type="checkbox" class="form-check-input ml-1" id="onHome" formControlName="onHome">
        <label for="onHome"class="ml-4">En page d'accueil</label>
        <small id="onHomeHelp" class="form-text text-muted">Si vous voulez que ce produit soit mis en avant sur votre page d'accueil.</small>
    </div>
    <button type="submit" class="btn btn-primary">{{ (id) ? 'Modifier': 'Ajouter' }}</button>
    <button type="button" class="btn" (click)="back()">Retour</button>
</form>
